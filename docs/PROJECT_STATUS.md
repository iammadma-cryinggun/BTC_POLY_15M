# Polymarket V2 é¡¹ç›®ç°çŠ¶æŠ¥å‘Š

> **æ—¥æœŸ**: 2026-01-28
> **çŠ¶æ€**: æ¶æ„æ­å»ºå®Œæˆï¼Œå‡†å¤‡ç­–ç•¥å¼€å‘

---

## âœ… å·²å®Œæˆçš„å·¥ä½œ

### **1. é¡¹ç›®ç»“æ„åˆ›å»º**

```
polymarket_v2/
â”œâ”€â”€ strategies/
â”‚   â”œâ”€â”€ base_strategy.py          âœ… åŸºç¡€ç­–ç•¥ç±»
â”‚   â””â”€â”€ simple_example.py         âœ… ç¤ºä¾‹ç­–ç•¥
â”œâ”€â”€ config/
â”‚   â””â”€â”€ risk_config.py            âœ… é£é™©é…ç½®
â”œâ”€â”€ docs/
â”‚   â””â”€â”€ ARCHITECTURE.md           âœ… æ¶æ„æ–‡æ¡£
â”œâ”€â”€ README.md                     âœ… é¡¹ç›®è¯´æ˜
â””â”€â”€ .gitkeep                     âœ… å…¶ä»–ç›®å½•
```

### **2. æ ¸å¿ƒæ¶æ„è®¾è®¡**

#### **BaseStrategy - åŸºç¡€ç­–ç•¥ç±»**

```python
class BaseStrategy(Strategy):
    """
    å……åˆ†åˆ©ç”¨ NautilusTrader å·¥å…·å¥—ä»¶

    âœ… Portfolio ç³»ç»Ÿç®¡ç†ä»“ä½
    âœ… BettingAccount è®¡ç®—ç›ˆäº
    âœ… RiskEngine é£é™©æ£€æŸ¥
    âœ… Cache æ•°æ®æŸ¥è¯¢
    """
```

**æ ¸å¿ƒæ–¹æ³•**:
- `get_current_position()` - ä½¿ç”¨ Portfolio æŸ¥è¯¢ä»“ä½
- `get_account_info()` - ä½¿ç”¨ BettingAccount æŸ¥è¯¢ä½™é¢
- `get_order_book()` - ä½¿ç”¨ Cache è·å–è®¢å•ç°¿
- `can_submit_order()` - é¢å¤–é£é™©æ£€æŸ¥
- `submit_order_with_check()` - æäº¤è®¢å•
- `submit_oco_orders()` - æäº¤ OCO è®¢å•

#### **RiskConfig - é£é™©é…ç½®**

```python
# âœ… ä½¿ç”¨ NautilusTrader RiskEngine
RiskEngineConfig(
    max_order_submit_rate=10,
    max_notional_per_order={...},
    bypass_check=False,
)

# âœ… ç­–ç•¥çº§åˆ«é¢å¤–é…ç½®
StrategyRiskConfig(
    max_positions=1,
    min_free_balance=Decimal("10.00"),
    max_position_size=Decimal("100"),
    max_daily_pnl_loss=Decimal("-50.00"),
)
```

#### **SimpleExampleStrategy - ç¤ºä¾‹ç­–ç•¥**

å±•ç¤ºå¦‚ä½•æ­£ç¡®ä½¿ç”¨ BaseStrategyï¼š
- ä½¿ç”¨ Portfolio æŸ¥è¯¢ä»“ä½
- ä½¿ç”¨ BettingAccount æŸ¥è¯¢ä½™é¢
- æäº¤è®¢å•ï¼ˆRiskEngine è‡ªåŠ¨æ£€æŸ¥ï¼‰
- å¤„ç†è®¢å•äº‹ä»¶
- ä½¿ç”¨ OCO è®¢å•è®¾ç½®æ­¢ç›ˆæ­¢æŸ

### **3. æ¶æ„æ–‡æ¡£**

- **README.md**: é¡¹ç›®æ¦‚è§ˆå’Œæ ¸å¿ƒç†å¿µ
- **ARCHITECTURE.md**: è¯¦ç»†æ¶æ„è®¾è®¡
- **ä»£ç æ³¨é‡Š**: è¯¦ç»†çš„ä»£ç è¯´æ˜

---

## ğŸ¯ æ ¸å¿ƒæ”¹è¿›å¯¹æ¯”

### **æ—§é¡¹ç›® vs æ–°é¡¹ç›®**

| ç»´åº¦ | æ—§é¡¹ç›® (poly_btc_update) | æ–°é¡¹ç›® (polymarket_v2) |
|------|------------------------|---------------------|
| **ä»“ä½ç®¡ç†** | âŒ è‡ªå·±ç»´æŠ¤ paper_position | âœ… ä½¿ç”¨ Portfolio |
| **ç›ˆäºè®¡ç®—** | âŒ è‡ªå·±è®¡ç®— YES/NO ç›ˆäº | âœ… ä½¿ç”¨ BettingAccount |
| **é£é™©æ£€æŸ¥** | âŒ ç®€å•çš„ä½™é¢æ£€æŸ¥ | âœ… ä½¿ç”¨ RiskEngine |
| **å›æµ‹** | âŒ è‡ªå·±å†™å›æµ‹å¼•æ“ | âœ… ä½¿ç”¨ BacktestEngine |
| **è®¢å•ç®¡ç†** | âŒ ç­–ç•¥ä¸­ç®¡ç†æ­¢ç›ˆæ­¢æŸ | âœ… ä½¿ç”¨ OCO è®¢å• |
| **å·¥å…·ä½¿ç”¨ç‡** | **60%** | **100%ï¼ˆç›®æ ‡ï¼‰** |

---

## ğŸ“Š å·¥å…·ä½¿ç”¨ç‡å¯¹æ¯”

### **æ—§é¡¹ç›®å·¥å…·ä½¿ç”¨æƒ…å†µ**

```
âœ… ä½¿ç”¨çš„åŠŸèƒ½ï¼š
- Polymarket é€‚é…å™¨ (100%)
- OrderBook API (100%)
- Strategy åŸºç±» (100%)
- è®¢å•æ‰§è¡Œ (80%)

âŒ æœªä½¿ç”¨çš„åŠŸèƒ½ï¼š
- Portfolio ç³»ç»Ÿ (0%)
- BettingAccount (0%)
- RiskEngine (10%)
- BacktestEngine (0%)
- OCO/OTO è®¢å• (0%)

æ€»ä½“ä½¿ç”¨ç‡: 60%
```

### **æ–°é¡¹ç›®å·¥å…·ä½¿ç”¨ç›®æ ‡**

```
âœ… ä½¿ç”¨çš„åŠŸèƒ½ï¼š
- Polymarket é€‚é…å™¨ (100%)
- OrderBook API (100%)
- Strategy åŸºç±» (100%)
- è®¢å•æ‰§è¡Œ (100%)
- Portfolio ç³»ç»Ÿ (100%) â­ æ–°å¢
- BettingAccount (100%) â­ æ–°å¢
- RiskEngine (100%) â­ æ–°å¢
- BacktestEngine (100%) â­ å¾…å®ç°
- OCO/OTO è®¢å• (100%) â­ æ–°å¢

æ€»ä½“ä½¿ç”¨ç‡: 100%
```

---

## ğŸš€ ä¸‹ä¸€æ­¥è®¡åˆ’

### **é˜¶æ®µ 1: å®Œå–„åŸºç¡€è®¾æ–½ï¼ˆå½“å‰ï¼‰** â³

- [ ] åˆ›å»º `__init__.py` æ–‡ä»¶
- [ ] åˆ›å»º `requirements.txt`
- [ ] åˆ›å»ºè¿è¡Œè„šæœ¬ `run_live.py`
- [ ] åˆ›å»ºå›æµ‹è„šæœ¬ `run_backtest.py`
- [ ] æµ‹è¯• BaseStrategy åŠŸèƒ½
- [ ] æµ‹è¯• SimpleExampleStrategy

### **é˜¶æ®µ 2: è®¾è®¡æ–°ç­–ç•¥ï¼ˆä¸‹ä¸€æ­¥ï¼‰** â³â³

**é—®é¢˜**: ä¸ºä»€ä¹ˆè®¢å•ç°¿ä¸å¹³è¡¡ç­–ç•¥å¤±è´¥ï¼Ÿ

1. **Polymarket æµåŠ¨æ€§å¤ªä½**
   - ä¹°å–å‹é€šå¸¸ 0-1%ï¼ˆå‡ ä¹å¹³è¡¡ï¼‰
   - è®¢å•ç°¿æ›´æ–°é¢‘ç‡ä½
   - æ— æ³•è§¦å‘è®¢å•ç°¿ä¸å¹³è¡¡ä¿¡å·

2. **é¢„æµ‹å¸‚åœºçš„æœ¬è´¨**
   - ä»·æ ¼åæ˜ äº‹ä»¶æ¦‚ç‡ï¼Œä¸æ˜¯ä¾›éœ€å…³ç³»
   - é‡å¤§æ–°é—»/äº‹ä»¶é©±åŠ¨ä»·æ ¼å˜åŒ–
   - ä¸æ˜¯æŠ€æœ¯åˆ†æä¸»å¯¼

**æ–°ç­–ç•¥æ–¹å‘**:

#### **æ–¹å‘ 1: äº‹ä»¶é©±åŠ¨ç­–ç•¥** â­â­â­â­â­

```python
class EventDrivenStrategy(BaseStrategy):
    """
    åŸºäºé‡å¤§äº‹ä»¶çš„äº¤æ˜“ç­–ç•¥

    æ ¸å¿ƒé€»è¾‘ï¼š
    1. ç›‘æ§é‡å¤§æ–°é—»/äº‹ä»¶
    2. å¿«é€Ÿè¯„ä¼°äº‹ä»¶å½±å“
    3. åœ¨ä»·æ ¼è°ƒæ•´å‰äº¤æ˜“
    """

    def on_major_event(self, event):
        if event.impact == "HIGH":
            # å¿«é€Ÿååº”
            if event.sentiment == "POSITIVE":
                self.buy_market()
            else:
                self.sell_market()
```

**ä¼˜åŠ¿**:
- ç¬¦åˆ Polymarket çš„æœ¬è´¨ï¼ˆäº‹ä»¶é©±åŠ¨ï¼‰
- ä¸ä¾èµ–è®¢å•ç°¿ä¸å¹³è¡¡
- å¯ä»¥æå‰è·å–ä¿¡æ¯ä¼˜åŠ¿

**æŒ‘æˆ˜**:
- éœ€è¦æ•°æ®æºï¼ˆTwitterã€æ–°é—» APIï¼‰
- éœ€è¦äº‹ä»¶è¯„ä¼°æ¨¡å‹
- éœ€è¦å¿«é€Ÿæ‰§è¡Œ

#### **æ–¹å‘ 2: åšå¸‚ç­–ç•¥** â­â­â­â­

```python
class MarketMakingStrategy(BaseStrategy):
    """
    æä¾›æµåŠ¨æ€§ï¼Œèµšå–ä¹°å–ä»·å·®

    æ ¸å¿ƒé€»è¾‘ï¼š
    1. åŒæ—¶æŒ‚ä¹°å•å’Œå–å•
    2. èµšå–ä¸­é—´ä»·å·®
    3. ç®¡ç†åº“å­˜é£é™©
    """

    def on_order_book(self, order_book):
        mid = order_book.midpoint()
        spread = self.config.spread  # å¦‚ 2%

        # åŒæ—¶æŒ‚ä¹°å•å’Œå–å•
        buy_order = self.order_factory.limit(
            price=mid * (1 - spread/2),
            ...
        )

        sell_order = self.order_factory.limit(
            price=mid * (1 + spread/2),
            ...
        )

        self.submit_order_list(OrderList([buy_order, sell_order]))
```

**ä¼˜åŠ¿**:
- æä¾›æµåŠ¨æ€§ï¼ˆPolymarket éœ€è¦ï¼‰
- ä¸ä¾èµ–ä»·æ ¼æ–¹å‘
- å¯èƒ½æœ‰ç¨³å®šæ”¶ç›Š

**æŒ‘æˆ˜**:
- åº“å­˜é£é™©ç®¡ç†
- éœ€è¦åˆç†çš„ä»·å·®è®¾ç½®
- å¯èƒ½è¢«ç‹™å‡»

#### **æ–¹å‘ 3: ç»Ÿè®¡å¥—åˆ©** â­â­â­

```python
class StatisticalArbitrageStrategy(BaseStrategy):
    """
    è·¨å¸‚åœºå¥—åˆ©

    æ ¸å¿ƒé€»è¾‘ï¼š
    1. ç›‘æ§å¤šä¸ªå¸‚åœºçš„åŒä¸€ä»£å¸
    2. å¯»æ‰¾ä»·å·®æœºä¼š
    3. ä½ä¹°é«˜å–
    """

    def check_arbitrage(self):
        polymarket_price = self.get_polymarket_price()
        ftx_price = self.get_ftx_price()

        if polymarket_price < ftx_price * 0.95:
            # ä»·å·® > 5%ï¼Œå¥—åˆ©æœºä¼š
            self.buy_polymarket()
            self.sell_ftx()
```

**ä¼˜åŠ¿**:
- ç†è®ºä¸Šé£é™©è¾ƒä½
- å¸‚åœºä¸­æ€§
- ä¸ä¾èµ–æ–¹å‘

**æŒ‘æˆ˜**:
- éœ€è¦å¤šä¸ªå¸‚åœºæ¥å…¥
- éœ€è¦å¿«é€Ÿæ‰§è¡Œ
- å¯èƒ½ä»·å·®å¾ˆå°

### **é˜¶æ®µ 3: å›æµ‹éªŒè¯ï¼ˆæœªæ¥ï¼‰** â³â³â³

```python
# ä½¿ç”¨ BacktestEngine
from nautilus_trader.backtest.engine import BacktestEngine

def run_backtest(strategy_config, data_path):
    engine = BacktestEngine(
        venue=[PolymarketVenue()],
        data_clients=[...],
        config=BacktestRunConfig(...)
    )

    engine.add_strategy(EventDrivenStrategy(config=strategy_config))
    result = engine.run()

    return result
```

### **é˜¶æ®µ 4: å®ç›˜éƒ¨ç½²ï¼ˆæ›´è¿œï¼‰** â³â³â³â³

1. Paper Trading æµ‹è¯•ï¼ˆ1-2å‘¨ï¼‰
2. Portfolio åŒè½¨è¿è¡Œï¼ˆ1å‘¨ï¼‰
3. å°èµ„é‡‘å®ç›˜ï¼ˆ1-2å‘¨ï¼‰
4. é€æ­¥æ‰©å¤§è§„æ¨¡

---

## ğŸ“ å…³é”®å†³ç­–

### **å†³ç­– 1: ä¸ºä»€ä¹ˆä¿ç•™ NautilusTraderï¼Ÿ**

âœ… **NautilusTrader éå¸¸é€‚åˆ Polymarket**ï¼š
- å®˜æ–¹ Polymarket é€‚é…å™¨
- BettingAccount ä¸“ä¸ºäºŒå…ƒé¢„æµ‹å¸‚åœºè®¾è®¡
- æ”¯æŒ FOK/IOC è®¢å•ï¼ˆCLOB å¿…éœ€ï¼‰
- ä¸“ä¸šçš„é£é™©ç®¡ç†

âŒ **é—®é¢˜ä¸åœ¨å·¥å…·ï¼Œè€Œåœ¨ç­–ç•¥**ï¼š
- è®¢å•ç°¿ä¸å¹³è¡¡ç­–ç•¥ä¸é€‚åˆ Polymarket
- ä½†è¿™ä¸æ˜¯ NautilusTrader çš„é”™
- éœ€è¦é‡æ–°è®¾è®¡ç­–ç•¥é€»è¾‘

### **å†³ç­– 2: ä¸ºä»€ä¹ˆåˆ›å»ºæ–°é¡¹ç›®ï¼Ÿ**

âœ… **æ¸…æ™°çš„æ¶æ„åˆ†ç¦»**ï¼š
- æ—§é¡¹ç›®ï¼šæ··ä¹±çš„å·¥å…·ä½¿ç”¨ï¼ˆ60%ï¼‰
- æ–°é¡¹ç›®ï¼š100% åˆ©ç”¨æ¡†æ¶èƒ½åŠ›
- ä¾¿äºå¯¹æ¯”å’Œå­¦ä¹ 

âœ… **ä»é›¶å¼€å§‹çš„æ­£ç¡®æ¶æ„**ï¼š
- ä¸å—æ—§ä»£ç æŸç¼š
- å……åˆ†åˆ©ç”¨æ‰€æœ‰å·¥å…·
- å¹³æ»‘è¿‡æ¸¡åˆ°å®ç›˜

### **å†³ç­– 3: ä¸‹ä¸€æ­¥åº”è¯¥ä¼˜å…ˆåšä»€ä¹ˆï¼Ÿ**

**ä¼˜å…ˆçº§æ’åº**:

1. **ç«‹å³ä¼˜å…ˆ**: å®Œå–„åŸºç¡€è®¾æ–½ â­â­â­â­â­
   - requirements.txt
   - è¿è¡Œè„šæœ¬
   - æµ‹è¯•æ¡†æ¶

2. **çŸ­æœŸä¼˜å…ˆ**: è®¾è®¡æ–°ç­–ç•¥é€»è¾‘ â­â­â­â­â­
   - äº‹ä»¶é©±åŠ¨ç­–ç•¥
   - æ•°æ®æ”¶é›†ï¼ˆæ–°é—»ã€Twitterï¼‰
   - ç­–ç•¥å®ç°

3. **ä¸­æœŸä¼˜å…ˆ**: å›æµ‹éªŒè¯ â­â­â­â­
   - ä½¿ç”¨ BacktestEngine
   - å‚æ•°ä¼˜åŒ–
   - æ€§èƒ½è¯„ä¼°

---

## ğŸ“ æ ¸å¿ƒæ•™è®­

### **1. å·¥å…· vs ç­–ç•¥çš„æ¸…æ™°åˆ’åˆ†**

```
NautilusTraderï¼ˆå·¥å…·å¥—ä»¶ï¼‰âœ…
â”œâ”€ æ•°æ®å±‚ï¼šæä¾›æ•°æ®
â”œâ”€ æ‰§è¡Œå±‚ï¼šæ‰§è¡Œè®¢å•
â”œâ”€ Portfolioï¼šç®¡ç†ä»“ä½
â”œâ”€ BettingAccountï¼šè®¡ç®—ç›ˆäº
â”œâ”€ RiskEngineï¼šæ£€æŸ¥é£é™©
â””â”€ BacktestEngineï¼šå›æµ‹

æˆ‘ä»¬çš„ç­–ç•¥ï¼ˆç­–ç•¥é€»è¾‘ï¼‰âŒ
â”œâ”€ ä¿¡å·ç”Ÿæˆï¼šè®¢å•ç°¿ä¸å¹³è¡¡ï¼ˆä¸é€‚åˆ Polymarketï¼‰
â””â”€ éœ€è¦é‡æ–°è®¾è®¡ï¼šäº‹ä»¶é©±åŠ¨ / åšå¸‚ / å¥—åˆ©
```

### **2. å……åˆ†åˆ©ç”¨æ¡†æ¶çš„é‡è¦æ€§**

- âŒ æ—§é¡¹ç›®ï¼šè‡ªå·±ç»´æŠ¤ paper tradingã€è‡ªå·±è®¡ç®—ç›ˆäºã€è‡ªå·±å†™å›æµ‹
- âœ… æ–°é¡¹ç›®ï¼šä½¿ç”¨ Portfolioã€BettingAccountã€BacktestEngine

**æ”¶ç›Š**:
- å‡å°‘ä»£ç é‡
- æé«˜å¯é æ€§
- å¹³æ»‘è¿‡æ¸¡åˆ°å®ç›˜
- ä¸“æ³¨ç­–ç•¥é€»è¾‘

### **3. å¸‚åœºé€‰æ‹©çš„é‡è¦æ€§**

```
è®¢å•ç°¿ä¸å¹³è¡¡ç­–ç•¥
â”œâ”€ é€‚åˆï¼šé«˜æµåŠ¨æ€§å¸‚åœºï¼ˆBTC/USDTï¼‰
â””â”€ ä¸é€‚åˆï¼šä½æµåŠ¨æ€§å¸‚åœºï¼ˆPolymarketï¼‰

è§£å†³æ–¹æ¡ˆï¼š
â”œâ”€ A: ä¿ç•™ç­–ç•¥ï¼Œåˆ‡æ¢å¸‚åœº
â”œâ”€ B: ä¿ç•™å¸‚åœºï¼Œé‡æ–°è®¾è®¡ç­–ç•¥
â””â”€ âœ… æˆ‘ä»¬é€‰æ‹©ï¼šä¿ç•™ NautilusTrader å·¥å…·ï¼Œé‡æ–°è®¾è®¡ Polymarket ç­–ç•¥
```

---

## ğŸ“š å‚è€ƒæ–‡æ¡£

### **é¡¹ç›®æ–‡æ¡£**
- `README.md` - é¡¹ç›®è¯´æ˜
- `docs/ARCHITECTURE.md` - æ¶æ„è®¾è®¡
- `strategies/base_strategy.py` - åŸºç¡€ç­–ç•¥ç±»
- `config/risk_config.py` - é£é™©é…ç½®
- `strategies/simple_example.py` - ç¤ºä¾‹ç­–ç•¥

### **NautilusTrader æ–‡æ¡£**
- å®˜æ–¹æ–‡æ¡£: https://docs.nautilustrader.io
- BettingAccount æºç : `nautilus_trader/accounting/accounts/betting.pyx`
- Portfolio æºç : `nautilus_trader/portfolio/portfolio.pyx`
- RiskEngine æºç : `nautilus_trader/risk/engine.pyx`
- BacktestEngine æºç : `nautilus_trader/backtest/engine.pyx`

### **å¯¹æ¯”æ–‡æ¡£**
- `../poly_btc_update/NAUTILUS_REAL_VALUE.md` - NautilusTrader çœŸæ­£ä»·å€¼
- `../poly_btc_update/PROJECT_MEMORY.md` - æ—§é¡¹ç›®è®°å¿†

---

## ğŸš€ ç«‹å³è¡ŒåŠ¨

### **ä»Šå¤©å¯ä»¥åšçš„**

1. **æŸ¥çœ‹æ–°é¡¹ç›®ç»“æ„**
   ```bash
   cd D:\ç¿»å€é¡¹ç›®\polymarket_v2
   ls -la
   ```

2. **é˜…è¯»æ ¸å¿ƒæ–‡æ¡£**
   - `README.md` - äº†è§£æ ¸å¿ƒç†å¿µ
   - `docs/ARCHITECTURE.md` - ç†è§£æ¶æ„è®¾è®¡
   - `strategies/base_strategy.py` - æŸ¥çœ‹åŸºç¡€ç­–ç•¥ç±»

3. **å†³å®šä¸‹ä¸€æ­¥**
   - é€‰é¡¹ A: å®Œå–„åŸºç¡€è®¾æ–½ï¼ˆrequirements.txt, è¿è¡Œè„šæœ¬ï¼‰
   - é€‰é¡¹ B: è®¾è®¡æ–°ç­–ç•¥é€»è¾‘ï¼ˆäº‹ä»¶é©±åŠ¨ã€åšå¸‚ï¼‰
   - é€‰é¡¹ C: ä¸¤è€…å¹¶è¡Œ

### **æœ¬å‘¨ç›®æ ‡**

- [ ] å®ŒæˆåŸºç¡€è®¾æ–½
- [ ] è®¾è®¡æ–°ç­–ç•¥é€»è¾‘
- [ ] ç¼–å†™æ•°æ®æ”¶é›†æ¨¡å—
- [ ] å®ç°ç¬¬ä¸€ä¸ªæ–°ç­–ç•¥

---

**é¡¹ç›®çŠ¶æ€**: âœ… æ¶æ„æ­å»ºå®Œæˆï¼Œå‡†å¤‡ç­–ç•¥å¼€å‘
**åˆ›å»ºæ—¥æœŸ**: 2026-01-28
**ç»´æŠ¤è€…**: Martin + Claude Code
**æ ¸å¿ƒç†å¿µ**: 100% åˆ©ç”¨ NautilusTrader å·¥å…·å¥—ä»¶
